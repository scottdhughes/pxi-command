# 2026-02-17

## Quant review cycle (00:30 ET cron)
- Closed SHIP QUEUE item **P1-1** in `signals`: replaced static Monday holiday list with algorithmic NYSE holiday calendar logic.
- Added rule-based holiday computation in `signals/src/worker.ts`:
  - recurring NYSE holidays (incl. Good Friday via Easter calculation),
  - observed-date handling,
  - cross-year New Year observed edge,
  - exceptional closure override list.
- Updated scheduler decision logic to call `isNyseHoliday(...)` for Monday skip / Tuesday fallback.
- Expanded tests in `signals/tests/unit/worker_schedule.test.ts`:
  - deterministic Monday closure expectations for 2025–2032,
  - Good Friday check,
  - observed Independence Day Monday check,
  - scheduler behavior checks.
- Validation run:
  - `npm test -- tests/unit/worker_schedule.test.ts` ✅
  - `npm test` ✅ (19 files, 277 tests)
  - `npm run lint` ✅
- Updated `signals/docs/SHIP_QUEUE.md`:
  - marked P1-1 closed this cycle,
  - retained P0-3 (DB unique-constraint migration) as next high-priority PREP/ship target.

## Quant review cycle (01:00 ET cron)
- Closed SHIP QUEUE item **P1-2** in `signals`: hardened `/api/predictions` query parsing for `limit` and `evaluated`.
- Updated `signals/src/routes.ts`:
  - added `parsePredictionsQuery()` helper,
  - integer-only `limit` parsing,
  - clamped `limit` to `[1, 100]`,
  - deterministic `400` responses for malformed `limit` or `evaluated`.
- Added `signals/tests/unit/routes_predictions_query_validation.test.ts` with coverage for:
  - default behavior,
  - huge/non-positive limit clamping,
  - malformed limit rejection (`abc`, `10.5`, empty, scientific notation),
  - malformed evaluated rejection,
  - valid evaluated+limit pass-through.
- Validation run:
  - `npm test -- tests/unit/routes_predictions_query_validation.test.ts` ✅
  - `npm test` ✅ (20 files, 287 tests)
  - `npm run lint` ✅
- Updated `signals/docs/SHIP_QUEUE.md`:
  - marked P1-2 closed this cycle,
  - upgraded P0-3 with ship-ready SQL + function-level patch plan,
  - added P1-3 PREP item for explicit pipeline freshness health endpoint,
  - refined P2-1 scope to concrete validation functions + offline report path.

## Quant review cycle (01:30 ET cron)
- Closed SHIP QUEUE item **P1-3** in `signals`: shipped explicit pipeline freshness endpoint.
- Updated `signals/src/db.ts`:
  - added `PipelineFreshness` type,
  - added `getPipelineFreshness()` helper (states: `ok`, `stale`, `no_history`),
  - kept stale threshold configurable, defaulting to 8 days.
- Updated `signals/src/routes.ts`:
  - added `GET /api/health`,
  - returns `latest_success_at`, `hours_since_success`, `threshold_days`, `is_stale`, `status`.
- Added tests:
  - `signals/tests/unit/routes_health.test.ts` (fresh/stale/no_history/error route behavior),
  - `signals/tests/unit/db_pipeline_freshness.test.ts` (helper-level deterministic behavior, incl. invalid timestamp fallback).
- Updated docs:
  - `signals/docs/API.md` with `/api/health` contract,
  - `signals/docs/DEPLOYMENT.md` smoke check for `/signals/api/health`.
- Validation run:
  - `npm test -- tests/unit/routes_health.test.ts tests/unit/db_pipeline_freshness.test.ts` ✅
  - `npm test` ✅ (22 files, 295 tests)
  - `npm run lint` ✅
- Updated `signals/docs/SHIP_QUEUE.md`:
  - marked P1-3 closed this cycle,
  - added P1-4 PREP item for confidence intervals in `/api/accuracy`.

## Quant review cycle (02:00 ET cron)
- Closed SHIP QUEUE item **P1-4** in `signals`: added statistical uncertainty bands to `/api/accuracy`.
- Updated `signals/src/db.ts`:
  - introduced `AccuracyBucketStats` and `computeWilsonInterval()` (95% Wilson score interval),
  - extended `getAccuracyStats()` to return `hit_rate_ci_low` / `hit_rate_ci_high` for overall + grouped buckets.
- Updated `signals/src/routes.ts`:
  - `/api/accuracy` now returns:
    - `minimum_recommended_sample_size` (30),
    - per-bucket `sample_size_warning`,
    - `hit_rate_ci_low` and `hit_rate_ci_high`.
- Added tests:
  - `signals/tests/unit/routes_accuracy_intervals.test.ts` (high-sample, low-sample, zero-sample, error route cases),
  - `signals/tests/unit/db_accuracy_intervals.test.ts` (Wilson interval helper determinism and bounds clamping).
- Updated docs:
  - `signals/docs/API.md` with full `/api/accuracy` interval contract,
  - `signals/docs/SCORING.md` with Wilson formula + interpretation policy.
- Validation run:
  - `npm test -- tests/unit/db_accuracy_intervals.test.ts tests/unit/routes_accuracy_intervals.test.ts` ✅
  - `npm test` ✅ (24 files, 302 tests)
  - `npm run lint` ✅
- Updated `signals/docs/SHIP_QUEUE.md`:
  - marked P1-4 closed this cycle,
  - added P1-5 PREP item (trading-day target dates to remove weekend/holiday drift in evaluation horizon).

## Quant review cycle (02:30 ET cron)
- Closed SHIP QUEUE item **P1-5** in `signals`: switched prediction evaluation horizon from calendar days to **+7 NYSE trading days**.
- Added `signals/src/utils/calendar.ts`:
  - extracted shared NYSE holiday engine and trading-day helper (`addTradingDays`).
- Updated `signals/src/worker.ts`:
  - removed duplicated holiday logic and imported shared calendar helpers,
  - preserved worker exports used in schedule tests.
- Updated `signals/src/evaluation.ts`:
  - `calculateTargetDate()` now uses `addTradingDays(startDate, 7)`.
- Added tests:
  - `signals/tests/unit/evaluation_target_date.test.ts` (weekend + Monday-holiday + Good Friday behavior),
  - expanded `signals/tests/unit/worker_schedule.test.ts` with helper-parity assertion.
- Updated docs:
  - `signals/docs/SCORING.md` with explicit trading-day evaluation horizon policy.
- Updated queue:
  - marked P1-5 closed,
  - added P1-6 PREP item (run-level concurrency lock guard),
  - kept P0-3 as top ship candidate.
- Validation run:
  - `npm test -- tests/unit/evaluation_target_date.test.ts tests/unit/worker_schedule.test.ts` ✅
  - `npm test` ✅ (25 files, 307 tests)
  - `npm run lint` ✅

## Quant review cycle (03:00 ET cron)
- Closed SHIP QUEUE item **P0-4** in `signals`: added deploy-parity smoke gate to detect production drift.
- Added `signals/src/ops/deploy_parity.ts`:
  - validates `/api/health` payload contract,
  - validates `/api/accuracy` contract includes CI + sample-size fields,
  - detects duplicate logical keys in `/api/predictions` (`signal_date`, `theme_id`).
- Added `signals/scripts/deploy_parity_check.ts`:
  - one-command parity check for staging/production (`npm run smoke:deploy -- <base>`).
- Added `signals/tests/unit/deploy_parity.test.ts`:
  - validator pass/fail cases + duplicate-key detection.
- Updated docs/config:
  - `signals/docs/DEPLOYMENT.md` with post-deploy parity gate command,
  - `signals/package.json` adds `smoke:deploy` script,
  - `signals/docs/SHIP_QUEUE.md` marks P0-4 closed and upgrades P1-6 from PREP ONLY to SHIP-READY with exact migration/patch plan.
- Validation run:
  - `npm test -- tests/unit/deploy_parity.test.ts` ✅
  - `npm test` ✅ (26 files, 313 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (caught live drift):
    - `/api/health` currently 404,
    - `/api/accuracy` missing CI/sample-size fields,
    - `/api/predictions` still contains duplicate `(signal_date, theme_id)` rows.

## Quant review cycle (03:30 ET cron)
- Closed SHIP QUEUE item **P1-6** in `signals`: shipped run-level pipeline lock guard to prevent overlapping scheduled/manual executions.
- Added migration:
  - `signals/migrations/0004_pipeline_lock.sql` (`pipeline_locks` table + maintenance index).
- Updated `signals/src/db.ts`:
  - added `acquirePipelineLock(...)` with stale-lock cleanup + unique-key conflict handling,
  - added `releasePipelineLock(...)`,
  - added `PipelineLockAcquireResult` type.
- Updated `signals/src/scheduled.ts`:
  - wrapped `runPipeline()` with lock acquire/release in `try/finally`,
  - added typed `PipelineLockError` + `isPipelineLockError()`.
- Updated `signals/src/routes.ts`:
  - `POST /api/run` now returns deterministic `409 { ok:false, error:"pipeline_locked" }` on lock contention.
- Updated `signals/src/worker.ts`:
  - scheduled lock contention now warns and skips without writing false `runs.status=error` records.
- Added tests:
  - `signals/tests/unit/scheduled_locking.test.ts`,
  - `signals/tests/unit/routes_run_lock_conflict.test.ts`,
  - `signals/tests/unit/worker_scheduled_lock_skip.test.ts`.
- Updated docs:
  - `signals/docs/API.md` includes `409 pipeline_locked` contract,
  - `signals/docs/DEPLOYMENT.md` includes lock migration apply command,
  - `signals/docs/SHIP_QUEUE.md` marks P1-6 closed and adds next PREP item P1-7 (deploy drift closure).
- Validation run:
  - `npm test -- tests/unit/scheduled_locking.test.ts tests/unit/routes_run_lock_conflict.test.ts tests/unit/worker_scheduled_lock_skip.test.ts` ✅
  - `npm test` ✅ (29 files, 320 tests)
  - `npm run lint` ✅
  - `npx wrangler d1 migrations apply SIGNALS_DB --local --env production` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (live deploy drift still present).

## Quant review cycle (04:00 ET cron)
- Closed SHIP QUEUE item **P0-3** in `signals`: enforced DB-level uniqueness for logical prediction key (`signal_date`, `theme_id`) with cleanup migration + conflict-safe inserts.
- Added migration:
  - `signals/migrations/0005_signal_predictions_uniqueness.sql`
    - backup table `signal_predictions_backup_0005`,
    - canonical duplicate cleanup (keep earliest `(created_at, id)` per logical key),
    - unique index `idx_signal_predictions_signal_theme_unique` on `(signal_date, theme_id)`.
- Updated `signals/src/db.ts`:
  - `insertSignalPrediction()` and `insertSignalPredictions()` now use:
    - `ON CONFLICT(signal_date, theme_id) DO NOTHING`
- Added tests:
  - `signals/tests/unit/db_prediction_uniqueness_guard.test.ts`
    - single + batch insert conflict-safe SQL coverage.
- Updated docs/queue:
  - `signals/docs/DEPLOYMENT.md` with remote duplicate/index verification SQL.
  - `signals/docs/SHIP_QUEUE.md` marks P0-3 closed and refreshes queue timestamp.
- Validation run:
  - `npm test -- tests/unit/db_prediction_uniqueness_guard.test.ts` ✅
  - `npm test` ✅ (30 files, 322 tests)
  - `npm run lint` ✅
  - `npx wrangler d1 migrations apply SIGNALS_DB --local --env production` ✅
  - local D1 verification SQL ✅:
    - duplicate logical-key query returns `[]`,
    - unique index presence query returns `idx_signal_predictions_signal_theme_unique`.
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (live deploy drift still unresolved):
    - `/api/health` 404,
    - `/api/accuracy` missing CI/sample-size fields,
    - duplicate `(signal_date, theme_id)` rows still present in production feed.
- Research notes added for next methodology hardening pass:
  - 2024 KBS backtest-overfitting study (out-of-sample protocol sensitivity),
  - White Reality Check + Hansen SPA primary sources for data-snooping controls.

## Quant review cycle (04:30 ET cron)
- Closed SHIP QUEUE item **P1-8** in `signals`: sanitized admin-run failure responses to avoid leaking internal exception details.
- Updated `signals/src/routes.ts`:
  - `POST /api/run` now returns deterministic `500 { ok:false, error:"run_failed" }` for non-lock failures.
  - lock contention behavior remains unchanged (`409 pipeline_locked`).
  - internal error detail still persisted via `runs.error_message` for operator debugging.
- Updated tests:
  - `signals/tests/unit/routes_run_lock_conflict.test.ts`
    - asserts sanitized public response,
    - asserts internal persisted row still captures original exception message.
- Updated docs/queue:
  - `signals/docs/API.md` reflects sanitized error contract for admin endpoint.
  - `signals/docs/SHIP_QUEUE.md` marks P1-8 closed, refreshes timestamp, and adds new PREP item **P1-9** (no-store cache headers for operational/admin endpoints).
- Validation run:
  - `npm test -- tests/unit/routes_run_lock_conflict.test.ts` ✅
  - `npm test` ✅ (30 files, 322 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (live drift persists):
    - `/api/health` 404,
    - `/api/accuracy` missing CI/sample-size contract fields,
    - duplicate `(signal_date, theme_id)` keys still present in live feed (incl. 2026-01-19, 2026-01-20, 2026-02-17).
- Current top open execution item remains **P1-7** (deploy drift closure) pending explicit production deploy/migration run.

## Quant review cycle (05:00 ET cron)
- Closed SHIP QUEUE item **P1-9** in `signals`: added deterministic `Cache-Control: no-store` headers for operational/admin endpoints.
- Updated `signals/src/routes.ts`:
  - extended `jsonResponse(...)` helper to accept explicit response headers,
  - applied no-store policy to:
    - `GET /api/health` (success + error),
    - `GET /api/accuracy` (success + error),
    - `GET /api/predictions` (success + validation/error),
    - `POST /api/run` (success + `401`/`409`/`429`/`500`).
- Updated tests:
  - `signals/tests/unit/routes_health.test.ts`
  - `signals/tests/unit/routes_accuracy_intervals.test.ts`
  - `signals/tests/unit/routes_predictions_query_validation.test.ts`
  - `signals/tests/unit/routes_run_lock_conflict.test.ts`
  - added assertions for `Cache-Control: no-store` on covered response paths.
- Updated docs:
  - `signals/docs/API.md` with explicit operational/admin cache policy section.
  - `signals/docs/SHIP_QUEUE.md` marks P1-9 closed, refreshes parity timestamp, and adds new prep items:
    - **P0-5** (target-date anchored historical exit pricing),
    - **P1-10** (deploy artifact manifest endpoint for release provenance).
- Validation run:
  - `npm test -- tests/unit/routes_health.test.ts tests/unit/routes_accuracy_intervals.test.ts tests/unit/routes_predictions_query_validation.test.ts tests/unit/routes_run_lock_conflict.test.ts` ✅
  - `npm test` ✅ (30 files, 322 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (live deploy drift persists):
    - `/api/health` still `404`,
    - `/api/accuracy` still missing CI/sample-size contract fields,
    - `/api/predictions` still exposes duplicate logical keys for several dates.
- Research refresh (primary-source anchors confirmed via Crossref metadata):
  - White (2000) Reality Check — https://doi.org/10.1111/1468-0262.00152
  - Romano & Wolf (2005) Stepwise multiple testing — https://doi.org/10.1111/j.1468-0262.2005.00615.x
  - Bailey et al. (2016) Probability of backtest overfitting — https://doi.org/10.21314/jcf.2016.322
  - Arian et al. (2024) ML-era backtest overfitting OOS comparisons — https://doi.org/10.1016/j.knosys.2024.112477
  - Bailey & López de Prado (2014) Deflated Sharpe Ratio — https://doi.org/10.3905/jpm.2014.40.5.094

## Quant review cycle (05:30 ET cron)
- Closed SHIP QUEUE item **P1-10** in `signals`: shipped deploy artifact manifest endpoint + parity validator coverage.
- Updated `signals/src/routes.ts`:
  - added `GET /api/version` returning:
    - `api_contract_version`,
    - `worker_version`,
    - `build_sha`,
    - `build_timestamp`,
    - `generated_at`.
  - applied `Cache-Control: no-store` policy to manifest endpoint.
  - added `/api/version` to in-worker agent markdown canonical routes.
- Updated config/provenance wiring:
  - `signals/src/config.ts` now parses and normalizes `BUILD_SHA`, `BUILD_TIMESTAMP`, `WORKER_VERSION`.
  - `signals/wrangler.toml` now includes metadata vars in staging + production env blocks.
- Updated deploy safety checks:
  - `signals/src/ops/deploy_parity.ts` adds `validateVersionPayload()`.
  - `signals/scripts/deploy_parity_check.ts` now gates `/api/version` alongside health/accuracy/predictions.
- Added/updated tests:
  - new `signals/tests/unit/routes_version.test.ts`.
  - updated `signals/tests/unit/deploy_parity.test.ts` with version payload pass/fail cases.
  - updated `signals/tests/unit/config.test.ts` with deploy-metadata normalization cases.
- Updated docs/queue:
  - `signals/docs/API.md` documents `/api/version` contract and cache policy.
  - `signals/docs/DEPLOYMENT.md` adds build-var deploy commands and manifest checklist.
  - `signals/docs/SHIP_QUEUE.md` marks **P1-10** closed; adds **P1-11 PREP** (strict anti-placeholder metadata validation).
- Validation run:
  - `npm test -- tests/unit/routes_version.test.ts tests/unit/deploy_parity.test.ts tests/unit/config.test.ts` ✅
  - `npm test` ✅ (31 files, 328 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals` ❌ expected fail (live drift persists and now includes `/api/version` 404):
    - `/api/version` 404,
    - `/api/health` 404,
    - `/api/accuracy` missing CI/sample-size fields,
    - duplicate logical keys still present in live `/api/predictions`.

## Quant review cycle (06:00 ET cron)
- Closed SHIP QUEUE item **P1-11** in `signals`: enforced strict anti-placeholder deploy metadata checks for release parity.
- Updated deploy parity core (`signals/src/ops/deploy_parity.ts`):
  - added strict option to `validateVersionPayload(...)` (`strictVersion`),
  - strict checks now reject placeholder metadata (`signals-dev`, `local-dev`, all-zero `build_sha`, implausibly old/epoch-like timestamps),
  - added deterministic CLI parser `parseDeployParityArgs(...)` with unknown-flag and extra-arg hard failures.
- Updated parity script (`signals/scripts/deploy_parity_check.ts`):
  - now supports `--strict-version`,
  - passes strict toggle into version validator,
  - includes `strict_version` in parity summary payload for operator traceability.
- Added tests (`signals/tests/unit/deploy_parity.test.ts`):
  - strict-mode placeholder fail + realistic metadata pass,
  - CLI parser coverage (default/base+strict/unknown flag/multiple positional args).
- Updated docs/queue:
  - `signals/docs/DEPLOYMENT.md` now includes strict production gate command:
    - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version`
  - `signals/docs/SHIP_QUEUE.md` marks **P1-11** closed, refreshes timestamp, and updates P1-7 latest observed strict parity state.
- Validation run:
  - `npm test -- tests/unit/deploy_parity.test.ts` ✅
  - `npm test` ✅ (31 files, 334 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version` ❌ expected fail (live deploy drift persists):
    - `/api/version` 404,
    - `/api/health` 404,
    - `/api/accuracy` missing CI/sample-size fields,
    - duplicate `(signal_date, theme_id)` rows still present (including 2026-01-19, 2026-01-20, 2026-02-17).

## Quant review cycle (06:30 ET cron)
- Closed SHIP QUEUE item **P0-5** in `signals`: anchored evaluation exits to target-date historical closes and removed delayed-run spot-price drift.
- Updated `signals/src/utils/price.ts`:
  - added `fetchHistoricalETFPriceOnOrAfter(...)`,
  - added batched `fetchMultipleHistoricalETFPrices(...)`,
  - added deterministic key helper for `(symbol,targetDate)` historical lookups.
- Updated `signals/src/evaluation.ts`:
  - evaluation phase now resolves exits by `(proxy_etf, target_date)` historical close,
  - persists `exit_price_date` and explicit unresolved `evaluationNote` values.
- Updated `signals/src/db.ts` + migration `signals/migrations/0006_prediction_eval_price_date.sql`:
  - new columns: `exit_price_date`, `evaluation_note`,
  - `updatePredictionOutcome(...)` now accepts structured outcome payload,
  - accuracy aggregates now exclude unresolved rows (`hit IS NOT NULL`) from denominators.
- Updated `signals/src/routes.ts` + docs:
  - `/api/predictions` now exposes `exit_price_date` and `evaluation_note`.
  - docs refreshed in `signals/docs/API.md`, `signals/docs/SCORING.md`, `signals/docs/DEPLOYMENT.md`, `signals/docs/SHIP_QUEUE.md`.
- Added tests:
  - `signals/tests/unit/utils_price_historical.test.ts` (new),
  - `signals/tests/unit/evaluation_target_price_date.test.ts` (new),
  - updated `signals/tests/unit/evaluation_store_predictions.test.ts` mocks,
  - updated `signals/tests/unit/db_prediction_dedupe.test.ts` assertions for unresolved-row exclusion.
- Validation run:
  - `npm test -- tests/unit/utils_price_historical.test.ts tests/unit/evaluation_target_price_date.test.ts tests/unit/evaluation_store_predictions.test.ts tests/unit/db_prediction_dedupe.test.ts` ✅
  - `npm test` ✅ (33 files, 339 tests)
  - `npm run lint` ✅
  - `npm run offline` ✅
  - `npx wrangler d1 migrations apply SIGNALS_DB --local --env production` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version` ❌ expected fail (live deploy drift still unresolved).
- Research metadata refresh (primary-source verification via Crossref API):
  - Arian et al. (2024), backtest overfitting in ML era — https://doi.org/10.1016/j.knosys.2024.112477
  - Bailey et al. (2016), probability of backtest overfitting — https://doi.org/10.21314/jcf.2016.322
  - White (2000), Reality Check — https://doi.org/10.1111/1468-0262.00152
  - Hansen / Romano & Wolf (2005), formalized data-snooping controls — https://doi.org/10.1111/j.1468-0262.2005.00615.x
  - Bailey & López de Prado (2014), Deflated Sharpe Ratio — https://doi.org/10.3905/jpm.2014.40.5.094

## Quant review cycle (07:00 ET cron)
- Closed SHIP QUEUE item **P1-12** in `signals`: added evaluation-completeness visibility to `/api/accuracy` to quantify unresolved-exit attrition.
- Updated `signals/src/db.ts`:
  - extended `AccuracyStats` with `evaluated_total`, `resolved_total`, `unresolved_total`, `unresolved_rate`,
  - `getAccuracyStats()` now runs a completeness aggregation over canonical predictions (`COUNT(*) evaluated_total`, unresolved `CASE WHEN hit IS NULL`).
- Updated `signals/src/routes.ts`:
  - `/api/accuracy` now returns `evaluated_count`, `resolved_count`, `unresolved_count`, `unresolved_rate` alongside existing CI/sample-size fields.
- Updated deploy parity gate:
  - `signals/src/ops/deploy_parity.ts` now requires/types these completeness fields for `/api/accuracy` contract validation.
- Updated tests:
  - `signals/tests/unit/routes_accuracy_intervals.test.ts`
  - `signals/tests/unit/db_prediction_dedupe.test.ts`
  - `signals/tests/unit/deploy_parity.test.ts`
  - `signals/tests/unit/scheduled_locking.test.ts` (mock shape alignment)
- Updated docs/queue:
  - `signals/docs/API.md`, `signals/docs/SCORING.md`, `signals/docs/SHIP_QUEUE.md`.
  - refreshed P1-7 parity drift evidence timestamp and expanded missing-field list.
- Validation run:
  - `npm test -- tests/unit/routes_accuracy_intervals.test.ts tests/unit/db_prediction_dedupe.test.ts tests/unit/deploy_parity.test.ts tests/unit/scheduled_locking.test.ts` ✅
  - `npm test` ✅ (33 files, 340 tests)
  - `npm run lint` ✅
  - `npm run offline` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version` ❌ expected fail (live drift persists: `/api/version` 404, `/api/health` 404, `/api/accuracy` contract lag, duplicate logical keys in live predictions).
- Research verification note:
  - Re-verified primary-source metadata via Crossref API endpoints for:
    - White (2000) — https://doi.org/10.1111/1468-0262.00152
    - Bailey et al. (2016) — https://doi.org/10.21314/jcf.2016.322
    - Arian et al. (2024) — https://doi.org/10.1016/j.knosys.2024.112477

## Quant review cycle (07:30 ET cron)
- Closed SHIP QUEUE item **P2-2** in `signals`: shipped deterministic offline validation primitives for evaluation robustness and multiple-testing hygiene.
- Added `signals/src/evaluation_validation.ts`:
  - `computeWalkForwardSlices(...)` (expanding/rolling split builder with no-leakage boundaries),
  - tie-aware `computeSpearmanCorrelation(...)`,
  - `computeRankICSeries(...)` (per-date rank alignment stability),
  - `computeHitRateIntervals(...)` (Wilson-backed interval summary + sample-size warnings),
  - `computeMultipleTestingAdjustedPvalues(...)` (Holm step-down baseline; Reality-Check/SPA-ready interface).
- Added `signals/tests/unit/evaluation_validation.test.ts` with deterministic coverage for:
  - split construction + non-overlap,
  - rank-IC/spearman sign behavior,
  - CI summary semantics,
  - adjusted p-value correctness + malformed-input rejection.
- Updated `signals/docs/SCORING.md` with Validation Protocol Primitives and primary-source anchors:
  - White (2000), Romano & Wolf (2005), Bailey et al. (2016), Arian et al. (2024), Bailey & López de Prado (2014).
- Updated `signals/docs/SHIP_QUEUE.md`:
  - marked **P2-2** closed with evidence,
  - advanced **P2-1** from PREP ONLY to **SHIP-READY** with explicit script-level implementation and validation gates,
  - refreshed queue timestamp to 07:30 EST.
- Validation run:
  - `npm test -- tests/unit/evaluation_validation.test.ts` ✅
  - `npm test` ✅ (34 files, 347 tests)
  - `npm run lint` ✅
  - `npm run offline` ✅

## Quant review cycle (08:00 ET cron)
- Closed SHIP QUEUE item **P2-1** in `signals`: shipped offline evaluation report pipeline with walk-forward, rank-IC summaries, Wilson CIs, and Holm-adjusted p-values.
- Added `signals/src/ops/evaluation_report.ts`:
  - deterministic CLI arg parser (`parseEvaluationReportArgs`),
  - defensive prediction-row normalization (`normalizeEvaluationRows`),
  - exact two-sided binomial helper (`computeTwoSidedBinomialPValue`),
  - report builder (`buildEvaluationReport`) and markdown renderer (`renderEvaluationReportMarkdown`),
  - embedded primary-source references (White 2000, Romano & Wolf 2005, Bailey et al. 2016, Arian et al. 2024, Bailey & López de Prado 2014).
- Added executable script + fixture:
  - `signals/scripts/evaluation_report.ts`
  - `signals/data/evaluation_sample_predictions.json`
  - `signals/package.json` script: `report:evaluation`.
- Added tests:
  - `signals/tests/unit/evaluation_report.test.ts` (CLI parsing, exact binomial determinism, report assembly).
- Updated docs/queue:
  - `signals/docs/SCORING.md` with report command/outputs.
  - `signals/docs/SHIP_QUEUE.md`:
    - marked **P2-1** closed,
    - re-ranked deploy-drift closure as **P0-6 PREP**,
    - added **P1-13 PREP** (expected artifact parity pin),
    - added **P2-3 PREP** (governance thresholds in report).
- Validation run:
  - `npm test -- tests/unit/evaluation_report.test.ts` ✅
  - `npm run report:evaluation -- --input data/evaluation_sample_predictions.json --out out/evaluation --min-train 4 --test-size 2 --step-size 2 --minimum-sample 6` ✅ (rows=24, slices=2, hypotheses=8)
  - `npm test` ✅ (35 files, 352 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version` ❌ expected fail (live drift unchanged: `/api/version` 404, `/api/health` 404, `/api/accuracy` contract lag, duplicate logical keys in live predictions)

## Quant review cycle (08:30 ET cron)
- Closed SHIP QUEUE item **P1-13** in `signals`: added expected-artifact parity pinning to prevent false-green deploy checks.
- Updated `signals/src/ops/deploy_parity.ts`:
  - extended `VersionValidationOptions` with `expectedWorkerVersion` + `expectedBuildSha`,
  - `validateVersionPayload(...)` now fails on explicit `worker_version` / `build_sha` mismatches,
  - `parseDeployParityArgs(...)` now supports:
    - `--expect-worker-version <value>` and `--expect-worker-version=<value>`,
    - `--expect-build-sha <value>` and `--expect-build-sha=<value>`,
    - deterministic missing-value failures.
- Updated `signals/scripts/deploy_parity_check.ts`:
  - passes expected metadata through to version validator,
  - includes `expected_worker_version` + `expected_build_sha` in JSON summary output.
- Updated tests in `signals/tests/unit/deploy_parity.test.ts`:
  - validator pass/fail coverage for expected metadata matches,
  - parser coverage for new flags (separate and equals forms),
  - missing-value failure coverage.
- Updated docs and queue:
  - `signals/docs/DEPLOYMENT.md` adds strict + expected-artifact command pattern,
  - `signals/docs/SHIP_QUEUE.md` marks P1-13 closed and adds **P1-14 PREP** (DB schema-version parity gate).
- Validation run:
  - `npm test -- tests/unit/deploy_parity.test.ts` ✅
  - `npm test` ✅ (35 files, 357 tests)
  - `npm run lint` ✅
  - `npm run smoke:deploy -- https://pxicommand.com/signals --strict-version --expect-worker-version signals-d69e1d11d936-2026-02-17T13:33:40Z --expect-build-sha d69e1d11d936` ❌ expected fail (live drift remains: `/api/version` + `/api/health` 404, `/api/accuracy` contract lag, duplicate logical keys).
- Research refresh (primary-source verification via Crossref API):
  - Arian et al. (2024), out-of-sample method sensitivity in ML-era backtests — https://doi.org/10.1016/j.knosys.2024.112477
  - Hansen, Lunde & Nason (2011), Model Confidence Set for multiple-model selection control — https://doi.org/10.3982/ECTA5771
